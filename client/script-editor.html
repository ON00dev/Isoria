<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="screen-orientation" content="landscape">
    <meta name="orientation" content="landscape">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Isoria Script Editor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/fontawesome.min.css">
    <!-- Flaticon Uicons para os ícones fi -->    
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-solid-rounded/css/uicons-solid-rounded.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-bold-straight/css/uicons-bold-straight.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-thin-rounded/css/uicons-thin-rounded.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-thin-straight/css/uicons-thin-straight.css'>
    <link rel="stylesheet" href="css/engine-tools.css">
    <link rel="stylesheet" href="css/syntax-highlight.css">
    <!-- CodeMirror para destaque de sintaxe -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <!-- Fabric.js para ferramentas de desenho -->
    <script src="https://cdn.jsdelivr.net/npm/fabric@latest/dist/fabric.min.js"></script>
</head>
<body class="script-editor-page">
    <!-- Header/Menu Bar -->
    <header class="header">
        <div class="menu-bar">
            <div class="logo">
                <h1>Isoria Script Editor</h1>
            </div>
            <nav class="main-menu">
                <ul>
                    <li><a href="#" class="menu-item" data-menu="file">File</a></li>
                    <li><a href="#" class="menu-item" data-menu="edit">Edit</a></li>
                    <li><a href="#" class="menu-item" data-menu="view">View</a></li>
                    <li><a href="#" class="menu-item" data-menu="build">Build</a></li>
                    <li><a href="#" class="menu-item" data-menu="help">Help</a></li>
                </ul>
            </nav>
            <div class="header-controls">
                <button class="btn-play" id="btn-play"><i class="fi fi-rr-play"></i></button>
                <button class="btn-pause" id="btn-pause"><i class="fi fi-rr-pause"></i></button>
                <button class="btn-stop" id="btn-stop"><i class="fi fi-bs-stop-circle"></i></button>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-container">
        <!-- Left Sidebar - Script Editor -->
        <aside class="sidebar-left" id="sidebar-left">
            <section class="panel">
                <div class="panel-header">
                    <h3>Script Editor</h3>
                    <button class="panel-toggle">−</button>
                </div>
                <div class="panel-content">
                    <div class="script-editor-container">
                        <div class="editor-toolbar">
                            <button class="btn-icon" id="new-script-btn" title="Novo Script"><i class="fi fi-rs-add-document"></i></button>
                            <button class="btn-icon" id="save-script-btn" title="Salvar Script"><i class="fi fi-rr-disk"></i></button>
                            <button class="btn-icon" id="run-script-btn" title="Executar Script"><i class="fi fi-rr-play"></i></button>
                            <button class="btn-icon" id="format-script-btn" title="Formatar Script"><i class="fi fi-sr-align-center"></i></button>
                            <select id="script-selector" class="script-selector">
                                <!-- Scripts serão carregados dinamicamente -->
                            </select>
                        </div>
                        <textarea id="script-content" class="script-textarea" placeholder="// Escreva seu código JavaScript aqui..."></textarea>
                        <div class="script-api-help">
                            <h4>API Isoria</h4>
                            <div class="api-examples">
                                <div class="api-example">Isoria.scene.create('MainScene');</div>
                                <div class="api-example">Isoria.gameObject.create('sprite', 100, 100, { texture: 'player' });</div>
                                <div class="api-example">Isoria.player.create(200, 200, { speed: 5 });</div>
                                <div class="api-example">Isoria.camera.setZoom(1.5);</div>
                                <div class="api-example">Isoria.log('Mensagem para o console');</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </aside>

        <!-- Right Sidebar - Preview -->
        <aside class="sidebar-right" id="sidebar-right">
            <section class="panel">
                <div class="panel-header">
                    <h3>Preview</h3>
                    <button class="panel-toggle">−</button>
                </div>
                <div class="panel-content">
                    <div id="preview-viewport" class="preview-viewport">
                        <canvas id="game-canvas"></canvas>
                    </div>
                </div>
            </section>
        </aside>
    </main>

    <!-- Bottom Panel - Console -->
    <footer class="bottom-panel" id="bottom-panel">
        <div class="panel-tabs">
            <button class="tab active" data-tab="console">Console</button>
        </div>
        <div class="panel-content">
            <div class="console-output" id="console-output">
                <!-- Mensagens do console carregadas dinamicamente -->
            </div>
        </div>
    </footer>

    <!-- Dropdown Menus -->
    <div class="dropdown-menu" id="file-menu" style="display: none;">
        <div class="menu-item" data-action="new">New Project</div>
        <div class="menu-separator"></div>
        <div class="menu-item" data-action="open">Open Project</div>
        <div class="menu-item" data-action="open-folder">Open Folder</div>
        <div class="menu-separator"></div>
        <div class="menu-item" data-action="save">Save</div>
        <div class="menu-item" data-action="save-as">Save As...</div>
        <div class="menu-separator"></div>
        <div class="menu-item" data-action="import-assets">Import Assets</div>
        <div class="menu-item" data-action="export">Export Project</div>
    </div>

    <!-- Socket.io para comunicação com o servidor -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Scripts da Engine -->
    <script src="js/isoria-engine.js"></script>
    <script src="js/engine-tools.js"></script>
    <script src="js/script-editor.js"></script>
    
    <script>
        // Inicializar a engine quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', function() {
            window.engineTools = new EngineTools();
            window.scriptEditor = new ScriptEditor();
        });
    </script>
</body>
</html>